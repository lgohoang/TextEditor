
@{
    ViewBag.Title = "Format";
}

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">File</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="input-group">

                            <form id="from-upload">
                                <input type="file" name="UploadFile" id="txtUploadFile" class="homereportupload" accept="application/pdf,application/msword,
                    application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
                            </form>

                        </div>
                    </div>
                    <div class="col-md-8">
                        <button class="btn btn-default" type="button">Upload</button>
                        <button class="btn btn-default" type="button">Check</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Định dạng trang</h3>
            </div>
            <div class="panel-body row">
                <div class="input-group col-md-2">
                    <span class="control-label">Lề trái</span>
                    <input type="text" class="form-control">
                </div>
                <div class="input-group col-md-2">
                    <span class="control-label">Lề phải</span>
                    <input type="text" class="form-control">
                </div>

                <div class="input-group col-md-2">
                    <span class="control-label">Lề trên</span>
                    <input type="text" class="form-control">
                </div>

                <div class="input-group col-md-2">
                    <span class="control-label">Lề dưới</span>
                    <input type="text" class="form-control">
                </div>

                <div class="input-group col-md-2">
                    <span class="control-label">Loại giấy</span>
                    <input type="text" class="form-control">
                </div>

                <div class="input-group col-md-2">
                    <span class="control-label">Font chữ</span>
                    <input type="text" class="form-control">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Trang bìa</h3>
            </div>
            <div class="panel-body row">
                <div class="input-group col-md-3">
                    <span class="control-label">Cỡ chữ</span>
                    <input type="text" class="form-control">
                </div>
                <div class="input-group col-md-3">
                    <span class="control-label">Font chữ</span>
                    <input type="text" class="form-control">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Tên các chương</h3>
            </div>
            <div class="panel-body row">
                <div class="input-group col-md-3">
                    <span class="control-label">Cỡ chữ</span>
                    <input type="text" class="form-control">
                </div>
                <div class="input-group col-md-3">
                    <span class="control-label">Font chữ</span>
                    <input type="text" class="form-control">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Định dạng text trong các chương</h3>
            </div>
            <div class="panel-body row">
                <div class="input-group col-md-3">
                    <span class="control-label">Cỡ chữ</span>
                    <input type="text" class="form-control">
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $('#txtUploadFile').on('change', function (e) {
                var files = e.target.files;
                if (files.length > 0) {
                    if (this.value.lastIndexOf('.docx') === -1) {
                        alert('Only docx files are allowed!');
                        this.value = '';
                        return;
                    }
                    if (window.FormData !== undefined) {
                        var data = new FormData();
                        for (var x = 0; x < files.length; x++) {
                            data.append("file" + x, files[x]);
                        }

                        $.ajax({
                            type: "POST",
                            url: '/api/process/upload',
                            contentType: false,
                            processData: false,
                            data: data,
                            success: function (result) {
                                console.log(result);
                            },
                            error: function (xhr, status, p3, p4) {
                                var err = "Error " + " " + status + " " + p3 + " " + p4;
                                if (xhr.responseText && xhr.responseText[0] == "{")
                                    err = JSON.parse(xhr.responseText).Message;
                                console.log(err);
                            }
                        });
                    } else {
                        alert("This browser doesn't support HTML5 file uploads!");
                    }
                }
            });
        });
    </script>
}

